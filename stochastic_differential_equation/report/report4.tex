\section{停止時刻の性質}
	基礎に置く確率空間を$(\Omega,\mathcal{F},\mu)$とする．また集合$I \subset \R$によって確率過程の時点全体を表現する．
	$I$は$[0,T]\ (T > 0)$或は$\{0,1,\cdots,n\}$などを指し，
	$I$が$\R$の区間の場合は相対位相，$I$が高々可算集合の場合は離散位相を導入する．
	また扱う確率変数は全て実数値とする．
	\begin{screen}
		\begin{dfn}[フィルトレーション]
			$\mathcal{F}$の部分$\sigma$-加法族の系$\Set{\mathcal{F}_t}{t \in I}$
			が次を満たすとき，これをフィルトレーション(filtration)と呼ぶ:
			\begin{align}
				\mathcal{F}_s \subset \mathcal{F}_t
				\quad (\forall s \leq t,\ s,t \in I).
			\end{align}
		\end{dfn}
	\end{screen}
	
	\begin{screen}
		\begin{dfn}[停止時刻]
			次を満たす関数$\tau:\Omega \rightarrow \R$を($I$値)停止時刻(stopping time)という:
			\begin{align}
				\tau(\Omega) \subset I,
				\quad \{ \tau \leq t \} \in \mathcal{F}_t \quad (\forall t \in I).
			\end{align}
		\end{dfn}
	\end{screen}
	
	\begin{screen}
		\begin{thm}[停止時刻は可測写像]
			停止時刻$\tau$は可測$\mathcal{F}/\borel{\R}$である．
		\end{thm}
	\end{screen}
	
	\begin{prf}
		$\tau$の終集合を$I$に制限した写像$\tau^*$と
		恒等写像$i:I \rightarrow \R$を用いて$\tau = i \circ \tau^*$と表せる．
		\begin{align}
			\borel{I}=\Set{A \cap I}{A \in \borel{\R}} = \Set{i^{-1}(A)}{A \in \borel{\R}}
		\end{align}
		により$i$は可測$\borel{I}/\borel{\R}$であるから，$\tau^*$が可測$\mathcal{F}/\borel{I}$であれば定理の主張が従う．
		\begin{description}
			\item[$I$が区間のとき]
				$t \in I$に対し$I_t \coloneqq (-\infty,t] \cap I$とおけば
				${\tau^*}^{-1}(I_t) = \{ \tau^* \leq t \} \in \mathcal{F}_t \subset \mathcal{F}$が成り立つから
				\begin{align}
					\Set{I_t}{t \in I} \subset \Set{A \in \borel{I}}{{\tau^*}^{-1}(A) \in \mathcal{F}}
					\label{eq:stopping_time_mble}
				\end{align}
				が従う．左辺は$\borel{I}$を生成するから$\tau^*$の可測性が得られる．
				
			\item[$I$が高々可算集合のとき]
				先ず任意の$t \in I$に対して$\{ \tau^* < t \} \in \mathcal{F}_t$が成り立つことを示す．
				任意に$t \in I$を取り固定する．$t$に対して直前の元$s \in I$が存在する場合は
				$\{ \tau^* < t \} = \{ \tau^* \leq s \} \in \mathcal{F}_s \subset \mathcal{F}_t$となり，
				$t$が$I$の最小限である場合は$\{ \tau^* < t \} = \emptyset \in \mathcal{F}_t$が成り立つ．
				いずれでもない場合，$t - 1/n < x_n < t$を満たす点列$x_n \in I\ (n=1,2,3,\cdots)$を取れば，
				$\{ \tau^* < t \} = \cup_{n=1}^{\infty}\{ \tau^* \leq x_n \} \in \mathcal{F}_t$が成り立つ．
				以上より任意の$t \in I$に対して${\tau^*}^{-1}(\{t\}) = \{ \tau^* \leq t \} \backslash \{ \tau^* < t \} \in \mathcal{F}_t$が満たされ，
				任意の$A \in \borel{I}$は
				一点集合の可算和で表現できるから${\tau^*}^{-1}(A) \in \mathcal{F}$が従う．
				\QED
		\end{description}
	\end{prf}
	
	$\tau:\Omega \rightarrow \R$が$I$値定数関数なら$\{\tau \leq t\}\ (t \in I)$は
	$\emptyset$又は$\Omega$であるから，この場合$\tau$は停止時刻である．
	また($I$値)停止時刻$\sigma,\tau$に対し
	$\sigma \vee \tau$と$\sigma \wedge \tau$も停止時刻である．実際次が満たされる:
	\begin{align}
		\begin{cases}
			\{ \sigma \wedge \tau \leq t \} = \{ \sigma \leq t \} \cup \{ \tau \leq t \}, \\
			\{ \sigma \vee \tau \leq t \} = \{ \sigma \leq t \} \cap \{ \tau \leq t \}
		\end{cases}
		\quad ,(\forall t \in I).
	\end{align}
	
	\begin{screen}
		\begin{dfn}[停止時刻で定まる事象]
			停止時刻$\tau$に対し次の集合族を定義する:
			\begin{align}
				\mathcal{F}_\tau \coloneqq \Set{A \in \mathcal{F}}{\{ \tau \leq t \} \cap A \in \mathcal{F}_t,\ \forall t \in I}.
			\end{align}
		\end{dfn}
	\end{screen}
	
	\begin{screen}
		\begin{prp}[停止時刻の性質]
			停止時刻$\sigma, \tau$に対し次が成り立つ．
			\begin{description}
				\item[(1)] $\mathcal{F}_\tau$は$\sigma$-加法族である．
				\item[(2)] 或る$t \in I$に対して$\tau(\omega) = t\ (\forall \omega \in \Omega)$なら$\mathcal{F}_t = \mathcal{F}_\tau$.
				\item[(3)] $\sigma(\omega) \leq \tau(\omega)\ (\forall \omega \in \Omega)$ならば$\mathcal{F}_\sigma \subset \mathcal{F}_\tau$.
				\item[(4)] $\{\sigma \leq \tau\},\{\sigma < \tau\} \in \mathcal{F}_{\sigma \wedge \tau}$.
				\item[(5)] $\mathcal{F}_{\sigma \wedge \tau} = \mathcal{F}_\sigma \cap \mathcal{F}_\tau$.
				\item[(6)] $\mathcal{F}_{\sigma \vee \tau} = \mathcal{F}_\sigma \vee \mathcal{F}_\tau$.
			\end{description}
			\label{prp:properties_of_stopping_times}
		\end{prp}
	\end{screen}
	
	\begin{prf}\mbox{}
		\begin{description}
			\item[(1)] 停止時刻の定義より$\Omega \in \mathcal{F}_\tau$が満たされる．
				また$A \in \mathcal{F}_\tau$に対して
				$A^c \cap \{ \tau \leq t \} = \{ \tau \leq t \} \backslash \left( A \cap \{ \tau \leq t \} \right) \in \mathcal{F}_t$が成り立つから
				$A^c \in \mathcal{F}_\tau$も従う．そして可算個の$A_n \in \mathcal{F}_\tau$を取れば
				$\cup_{n=1}^{\infty} A_n \cap \{ \tau \leq t \} = \cup_{n=1}^{\infty} \left( A_n \cap \{ \tau \leq t \} \right) \in \mathcal{F}_t$
				が成り立つから$\mathcal{F}_{\tau}$は可算和でも閉じている．
			
			\item[(2)] 任意の$A \in \mathcal{F}_t$に対して
				\begin{align}
					A \cap \{ \tau \leq s \} =
					\begin{cases}
						A & t \leq s \\
						\emptyset & t > s
					\end{cases}
					\quad (\forall s \in I)
				\end{align}
				が成り立つから$A \in \mathcal{F}_\tau$が従う．
				逆に$A \in \mathcal{F}_\tau$に対しては$A = A \cap \{ \tau \leq t \} \in \mathcal{F}_t$
				が成り立つ．
				
			\item[(3)] 任意の$A \in \mathcal{F}_\sigma$に対して
				\begin{align}
					A \cap \{ \tau \leq t \} = A \cap \{ \sigma \leq t \} \cap \{ \tau \leq t \} \in \mathcal{F}_t 
					\quad (\forall t \in I)
				\end{align}
				が成り立つから$A \in \mathcal{F}_\tau$となる．
				
			\item[(4)] 任意の$t \in I$に対し
				\begin{align}
					\{\sigma < \tau\} \cap \{\sigma \wedge \tau \leq t\}
					&= \{\sigma < \tau\} \cap \{\tau \leq t\} + \{\sigma < \tau\} \cap \{\tau > t\} \cap \{\sigma \leq t\} \\
					&= \left(\bigcup_{\substack{s \in \Q \cap I \\ s \leq t}} \{\sigma \leq s\} \cap \{s < \tau\} \right) \cap \{\tau \leq t\} + \{\tau > t\} \cap \{\sigma \leq t\}
				\end{align}
				と表せるから$\{\sigma < \tau\} \in \mathcal{F}_{\sigma \wedge \tau}$が成り立つ．従って
				$\{\sigma \leq \tau\} = \{\tau < \sigma\}^c \in \mathcal{F}_{\sigma \wedge \tau}$も得られる．
			
			\item[(5)] 先ず(3)より$\mathcal{F}_{\sigma \wedge \tau} \subset \mathcal{F}_\sigma$と
				$\mathcal{F}_{\sigma \wedge \tau} \subset \mathcal{F}_\tau$が従う．
				一方任意の$A \in \mathcal{F}_\sigma \cap \mathcal{F}_\tau$に対し
				\begin{align}
					A \cap \{ \sigma \wedge \tau \leq t \} 
					= \left( A \cap \{ \sigma \leq t \} \right) \cup \left( A \cap \{ \tau \leq t \} \right) \in \mathcal{F}_t \quad (\forall t \in I)
				\end{align}
				が成り立つから$A \in \mathcal{F}_{\sigma \wedge \tau}$を得る．
			
			\item[(6)] 
				先ず(3)より$\mathcal{F}_\sigma \subset \mathcal{F}_{\sigma \vee \tau}$と$\mathcal{F}_\tau \subset \mathcal{F}_{\sigma \vee \tau}$
				が成り立つから$\mathcal{F}_\sigma \vee \mathcal{F}_\tau \subset \mathcal{F}_{\sigma \vee \tau}$が従う．
				一方任意に$A \in \mathcal{F}_{\sigma \vee \tau}$を取り$A = A \cap \{ \sigma \leq \tau \} + A \cap \{ \sigma > \tau \}$と分ければ，
				(4)より任意の$t \in I$に対して
				\begin{align}
					A \cap \{ \sigma \leq \tau \} \cap \{ \tau \leq t \}
					&= A \cap \{\sigma \vee \tau \leq t\} \cap \{ \sigma \leq \tau \} \cap \{ \tau \leq t \} \in \mathcal{F}_t, \\
					A \cap \{ \sigma > \tau \} \cap \{ \sigma \leq t \}
					&= A \cap \{\sigma \vee \tau \leq t\} \cap \{ \sigma > \tau \} \cap \{ \sigma \leq t \} \in \mathcal{F}_t
				\end{align}
				が成り立つから，$ \mathcal{F}_{\sigma \vee \tau} \subset \mathcal{F}_\sigma \vee \mathcal{F}_\tau$が得られる．
				\QED
		\end{description}
	\end{prf}
	
	\begin{screen}
		\begin{prp}[停止時刻と条件付き期待値]
			$X \in \Lp{1}{\operatorname{\mu}}$と
			停止時刻$\sigma, \tau$に対し以下が成立する．
			\begin{description}
				\item[(1)] $\cexp{\defunc_{\{\sigma \leq \tau\}} X}{\mathcal{F}_\sigma}(\omega) 
					= \defunc_{\{\sigma \leq \tau\}}(\omega) \cexp{X}{\mathcal{F}_{\sigma \wedge \tau}}(\omega) 
					\quad \mbox{$\mu$-a.s.}\omega \in \Omega$.
				\item[(2)] $\cexp{\defunc_{\{\sigma < \tau\}} X}{\mathcal{F}_\sigma}(\omega) 
					= \defunc_{\{\sigma < \tau\}}(\omega) \cexp{X}{\mathcal{F}_{\sigma \wedge \tau}}(\omega) 
					\quad \mbox{$\mu$-a.s.}\omega \in \Omega$.
				\item[(3)] $\cexp{\cexp{X}{\mathcal{F}_\sigma}}{\mathcal{F}_\tau}(\omega) = \cexp{X}{\mathcal{F}_{\sigma \wedge \tau}}(\omega)
					\quad \mbox{$\mu$-a.s.}\omega \in \Omega$.
			\end{description}
			\label{prp:stopping_time_and_conditional_expectation}
		\end{prp}
	\end{screen}
	
	\begin{prf}\mbox{}
		\begin{description}
			\item[第一段] 
				任意の$A \in \mathcal{F}_\sigma$に対し$A \cap \{\sigma \leq \tau\} \in \mathcal{F}_{\sigma \wedge \tau}$
				が成り立つことを示す．実際命題\ref{prp:properties_of_stopping_times}より
				\begin{align}
					A \cap \{\sigma \leq \tau\} \cap \{\sigma \wedge \tau \leq t\}
					= A \cap \{\sigma \leq t\} \cap \{\sigma \leq \tau\} \cap \{\sigma \wedge \tau \leq t\}
					\in \mathcal{F}_t
					\quad (\forall t \in I)
				\end{align}
				が成り立ち主張が得られる．同様にして$A \cap \{\sigma < \tau\} \in \mathcal{F}_{\sigma \wedge \tau}$も成り立つ．
				
			\item[第二段]
				(1)を示す．(2)も同様に示される．
				第一段と命題\ref{prp:properties_of_expanded_conditional_expectation}より，
				任意の$A \in \mathcal{F}_\sigma$に対して
				\begin{align}
					&\int_A \cexp{\defunc_{\{\sigma \leq \tau\}} X}{\mathcal{F}_\sigma}(\omega)\ \mu(d\omega)
					= \int_\Omega \defunc_{A \cap \{\sigma \leq \tau\}}(\omega) X(\omega)\ \mu(d\omega) \\
					&\qquad = \int_\Omega \defunc_{A \cap \{\sigma \leq \tau\}}(\omega) \cexp{X}{\mathcal{F}_{\sigma \wedge \tau}}(\omega)\ \mu(d\omega)
					= \int_A \defunc_{\{\sigma \leq \tau\}}(\omega) \cexp{X}{\mathcal{F}_{\sigma \wedge \tau}}(\omega)\ \mu(d\omega)
				\end{align}
				が成り立つから，特に
				\begin{align}
					A_1 &\coloneqq \Set{\omega \in \Omega}{\cexp{\defunc_{\{\sigma \leq \tau\}} X}{\mathcal{F}_\sigma}(\omega) > \defunc_{\{\sigma \leq \tau\}}(\omega) \cexp{X}{\mathcal{F}_{\sigma \wedge \tau}}(\omega)} \in \mathcal{F}_\sigma, \\
					A_2 &\coloneqq \Set{\omega \in \Omega}{\cexp{\defunc_{\{\sigma \leq \tau\}} X}{\mathcal{F}_\sigma}(\omega) < \defunc_{\{\sigma \leq \tau\}}(\omega) \cexp{X}{\mathcal{F}_{\sigma \wedge \tau}}(\omega)} \in \mathcal{F}_\sigma
				\end{align}
				とおけば$\mu(A_1) = \mu(A_2) = 0$となり(1)が成立する．
				
			\item[第三段]
				(3)を示す．任意の$B \in \mathcal{F}_\tau$に対して
				\begin{align}
					&\int_B \cexp{\cexp{X}{\mathcal{F}_\sigma}}{\mathcal{F}_\tau}(\omega)\ \mu(d\omega)
					= \int_B \cexp{X}{\mathcal{F}_\sigma}(\omega)\ \mu(d\omega) \\
					&\qquad = \int_B \defunc_{\{\tau \leq \sigma\}}(\omega) \cexp{X}{\mathcal{F}_\sigma}(\omega)\ \mu(d\omega)
						+ \int_B \defunc_{\{\sigma < \tau\}}(\omega) \cexp{X}{\mathcal{F}_\sigma}(\omega)\ \mu(d\omega)
				\end{align}
				と分ける．右辺第一項について，第一段と命題\ref{prp:properties_of_expanded_conditional_expectation}より
				\begin{align}
					&\int_B \defunc_{\{\tau \leq \sigma\}}(\omega) \cexp{X}{\mathcal{F}_\sigma}(\omega)\ \mu(d\omega)
					= \int_\Omega \cexp{\defunc_{B \cap \{\tau \leq \sigma\}} \cexp{X}{\mathcal{F}_\sigma}}{\mathcal{F}_{\sigma \wedge \tau}}(\omega)\ \mu(d\omega) \\
					&\qquad = \int_\Omega \defunc_{B \cap \{\tau \leq \sigma\}}(\omega) \cexp{\cexp{X}{\mathcal{F}_\sigma}}{\mathcal{F}_{\sigma \wedge \tau}}(\omega)\ \mu(d\omega)
					= \int_B \defunc_{\{\tau \leq \sigma\}}(\omega) \cexp{X}{\mathcal{F}_{\sigma \wedge \tau}}(\omega)\ \mu(d\omega)
				\end{align}
				が成り立ち，右辺第二項については命題\ref{prp:properties_of_expanded_conditional_expectation}と(2)より
				\begin{align}
					\int_B \defunc_{\{\sigma < \tau\}}(\omega) \cexp{X}{\mathcal{F}_\sigma}(\omega)\ \mu(d\omega)
					&= \int_B \cexp{\defunc_{\{\sigma < \tau\}} X}{\mathcal{F}_\sigma}(\omega)\ \mu(d\omega) \\
					&= \int_B \defunc_{\{\sigma < \tau\}}(\omega) \cexp{X}{\mathcal{F}_{\sigma \wedge \tau}}(\omega)\ \mu(d\omega)
				\end{align}
				が成り立つから
				\begin{align}
					\int_B \cexp{\cexp{X}{\mathcal{F}_\sigma}}{\mathcal{F}_\tau}(\omega)\ \mu(d\omega)
					= \int_B \cexp{X}{\mathcal{F}_{\sigma \wedge \tau}}(\omega)\ \mu(d\omega)
				\end{align}
				が従う．$B \in \mathcal{F}_\tau$の任意性より(3)が得られる．
				\QED
		\end{description}
	\end{prf}
	
	\begin{screen}
		\begin{thm}[停止時刻との合成写像の可測性]
			$I = [0,T]$，フィルトレーションを$(\mathcal{F}_t)_{t \in I}$，$\tau$を停止時刻とし，
			$M$を$I \times \Omega$上の$\R$値関数とする．全ての$\omega \in \Omega$に対し
			$I \ni t \longmapsto M(t,\omega)$が右連続でかつ$(\mathcal{F}_t)$-適合ならば，
			写像$\omega \longmapsto M(\tau(\omega),\omega)$は可測$\mathcal{F}_\tau/\borel{\R}$となる．
			\label{thm:measurability_of_stopping_time}
		\end{thm}
	\end{screen}
	
	\begin{prf}
		任意に$t \in I$を取り$t_j^n \coloneqq jt/2^n\ (j=0,1,\cdots,2^n,\ n=1,2,\cdots)$とおくと，
		右連続性により任意の$s \in [0,t]$に対して
		\begin{align}
			M(s,\omega) = \lim_{n \to \infty} \sum_{j=1}^{2^n} M_{t_j^n}(\omega) \defunc_{(t_{j-1}^n,t_j^n]}(s) + M_0(\omega) \defunc_{\{0\}}(s) \quad (\omega \in \Omega)
			\label{eq:stopping_time_measurability}
		\end{align}
		が成り立つ．右辺は各$n$で可測$\borel{[0,t]} \times \mathcal{F}_t/\borel{\R}$であるから
		$M$も可測$\borel{[0,t]} \times \mathcal{F}_t/\borel{\R}$となる．($t$の任意性から$M$は$(\mathcal{F}_t)$-発展的可測である．)
		一方停止時刻$\tau$について，$\tau \wedge t$が可測$\mathcal{F}_t/\borel{\R}$であるから
		\begin{align}
			\Omega \ni \omega \longmapsto (\tau(\omega) \wedge t, \omega) \in [0,t] \times \Omega
		\end{align}
		は可測$\mathcal{F}_t/\borel{[0,t]} \times \mathcal{F}_t$である．従って合成写像
		\begin{align}
			\Omega \ni \omega \longmapsto M(\tau(\omega) \wedge t,\omega) \in \R
		\end{align}
		は可測$\mathcal{F}_t/\borel{\R}$となる．任意の$A \in \borel{\R}$に対して
		\begin{align}
			\Set{\omega \in \Omega}{M(\tau(\omega),\omega) \in A} \cap \left\{ \tau \leq t \right\}
			= \Set{\omega \in \Omega}{M(\tau(\omega) \wedge t,\omega) \in A} \cap \left\{ \tau \leq t \right\}
			\in \mathcal{F}_t
		\end{align}
		が成り立つから，写像$\omega \longmapsto M(\tau(\omega),\omega)$は可測$\mathcal{F}_\tau/\borel{\R}$である
		\footnote{
			写像$\omega \longmapsto M(\tau(\omega),\omega)$が可測$\mathcal{F}/\borel{\R}$となっていないことにはこの結論が従わない．
			この点を確認すれば，式(\refeq{eq:stopping_time_measurability})より$M$が可測$\borel{I} \times \mathcal{F}/\borel{\R}$
			であることは慥かであるから，$\omega \longmapsto (\tau(\omega),\omega)$が可測$\mathcal{F}/\borel{I}\times\mathcal{F}$であることと
			併せて写像$\omega \longmapsto M(\tau(\omega),\omega)$が可測$\mathcal{F}/\borel{\R}$であることが判明する．
		}．
		\QED
	\end{prf}

\section{停止時刻の構成}

	\begin{screen}
		\begin{thm}[閉集合と停止時刻]
			$I = [0,T] \subset \R$，$(E,\rho)$を距離空間，$(X_t)_{t \in I}$を$E$値確率変数の族とし，
			$\mathcal{F}_0$が$\mu$-零集合を全て含んでいると仮定する．
			$\mu$-零集合$N$を除いて$I \ni t \longmapsto X_t(\omega)$が右連続で，
			かつ$(X_t)_{t \in I}$が$(\mathcal{F}_t)$-適合であるなら，任意の閉集合$F \subset E$に対し
			\begin{align}
				\tau(\omega) \coloneqq
				\begin{cases}
					0 & (\omega \in N) \\
					\inf{}{\Set{t \in I}{X_t(\omega) \in F}} \wedge T & (\omega \in \Omega \backslash N) \footnotemark
				\end{cases}
			\end{align}
			として$\tau:\Omega \rightarrow \R$を定めれば$\tau$は停止時刻となる．
			また$N'\ (N \subset N')$を除いて$I \ni t \longmapsto X_t(\omega)$が連続であるなら
			\begin{align}
				X_{t \wedge \tau(\omega)}(\omega) \in \{ X_0(\omega) \} \cup F^{ic} \quad (\forall \omega \in N',\ t \in I)
			\end{align}
			が成り立つ．ただし$F^i$は$F$の内核を表し$F^{ic}$は$F^i$の補集合を表す．
			\label{thm:closed_set_stopping_time}
		\end{thm}
	\end{screen}
	\footnotetext{
		$\Set{t \in I}{X_t(\omega) \in F} = \emptyset$の場合は
		\begin{align}
			\inf{}{\Set{t \in I}{X_t(\omega) \in F}} = \infty
		\end{align}
		と考え，$\tau(\omega) = T$とする．以後本稿でこのように表記する場合も同様に対処する．
	}
	確率空間が完備である場合は
	\begin{align}
		\tau(\omega) \coloneqq \inf{}{\Set{t \in I}{X_t(\omega) \in F}} \wedge T
		\quad (\forall \omega \in \Omega)
	\end{align}
	として$\tau$は停止時刻となる．実際任意の$t \in I$に対して，
	\begin{align}
		\{\tau \leq t\} = \{\tau \leq t\} \cap N + \Set{\omega \in \Omega \backslash N}{\tau(\omega) \leq t}
	\end{align}
	の右辺第一項は完備性より$\mu$-零集合，第二項は以下で$\mathcal{F}_t$に属すると証明される．

	\begin{prf}
		\begin{align}
			D_t(\omega) \coloneqq 
			\begin{cases}
				1 & (\omega \in N) \\
				\inf{}{\Set{\rho(X_r(\omega),F)}{r \in ([0,t] \cap \Q) \cup \{t\}}} & (\omega \in \Omega \backslash N)
			\end{cases}
		\end{align}
		とおけば
		\footnote{
			$\rho(X_r(\omega),F) = \inf{y \in F}{\rho(X_r(\omega),y)}$である．
		}，
		$D_t$は可測$\mathcal{F}_t/\borel{\R}$となる
		\footnote{
			写像$E \ni x \longmapsto \rho(x,F) \in \R$は連続であるから，合成写像
			\begin{align}
				\Omega \ni \omega \longmapsto \rho(X_t(\omega),F)
			\end{align}
			は可測$\mathcal{F}_t/\borel{\R}$となる．任意の$\lambda \in \R$に対し
			\begin{align}
				\left\{ \inf{}{\Set{\rho(X_r,F)}{r \in ([0,t] \cap \Q) \cup \{t\}}} \geq \lambda \right\}
				= \bigcap_{r \in ([0,t] \cap \Q) \cup \{t\}} \left\{ \rho(X_r,F) \geq \lambda \right\}
			\end{align}
			となり右辺の各集合は$\in \mathcal{F}_t$であるから
			写像$\Omega \ni \omega \longmapsto \inf{}{\Set{\rho(X_r(\omega),F)}{r \in ([0,t] \cap \Q) \cup \{t\}}}$
			も可測$\mathcal{F}_t/\borel{\R}$となる．任意の$A \in \borel{\R}$に対し
			\begin{align}
				D_t^{-1}(A) = 
				\begin{cases}
					N \cup \left\{ \inf{}{\Set{\rho(X_r,F)}{r \in ([0,t] \cap \Q) \cup \{t\}}} \in A \right\} & (1 \in A) \\
					\left\{ \inf{}{\Set{\rho(X_r,F)}{r \in ([0,t] \cap \Q) \cup \{t\}}} \in A \right\} & (1 \notin A)
				\end{cases}
			\end{align}
			となるが，$N \in \mathcal{F}_0$であるから$D_t$もまた可測$\mathcal{F}_t/\borel{\R}$となる．
		}．
		ここでは任意の$t \in [0,T)$に対して
		\begin{align}
			\Set{\omega \in \Omega \backslash N}{\tau(\omega) \leq t} = \Set{\omega \in \Omega \backslash N}{D_t(\omega) = 0}
			\label{eq:closed_set_stopping_time_1}
		\end{align}
		が成り立つことを示す．実際これが示されれば任意の$t \in I$に対し
		\begin{align}
			\{\tau \leq t\} =
			\begin{cases}
 				\Omega & (t = T) \\
				N + \Set{\omega \in \Omega \backslash N}{D_t(\omega) = 0} & (t < T)
 			\end{cases}
		\end{align}
		となるから$\tau$は停止時刻となる．式(\refeq{eq:closed_set_stopping_time_1})が成立することを示すには
		包含関係$\subset,\supset$のそれぞれを満たすことを確認すればよい．
		\begin{description}
			\item[$\subset$について]
				任意に$t \in [0,T)$を固定する．$\tau(\omega) \leq t$となる$\omega \in \Omega \backslash N$に対し
				$s \coloneqq \tau(\omega)$とおくと$X_s(\omega) \in F$となる．もし$X_s(\omega) \notin F$であるとすれば，
				$F$が閉集合であることと$s \longmapsto X_s(\omega)$の右連続性から
				或る$\delta > 0$が存在し，任意の$0 < h < \delta$に対して
				$X_{s+h}(\omega) \notin F$となり$s = \tau(\omega)$であることに矛盾する．
				今$\rho(X_s(\omega),F) = 0$が示されたが，$D_t(\omega) = 0$も成り立っている．
				実際もし$D_t(\omega) > 0$であるとすれば，$a \coloneqq D_t(\omega)$に対して
				\begin{align}
					\rho(X_s(\omega), X_r(\omega)) < a/2
				\end{align}
				を満たす$r \in ((s,t] \cap \Q) \cup \{t\}$が存在するから
				\begin{align}
					\rho(X_s(\omega),F) \geq \rho(X_r(\omega),F) - \rho(X_s(\omega), X_r(\omega)) > a - a/2 = a/2
				\end{align}
				となり矛盾が生じてしまう．
			
			\item[$\supset$について]
				任意に$t \in [0,T)$を固定する．$D_t(\omega) = 0$となる$\omega \in \Omega \backslash N$について
				\begin{align}
					\rho(X_{s_n}(\omega),F) < 1/n
				\end{align}
				となるように$s_n \in ([0,t] \cap \Q) \cup \{t\}$を取ることができる．$(s_n)_{n=1}^{\infty}$は
				$[0,t]$に集積点$s$を持ち，$F$が閉であるから$X_s(\omega) \in F$となる．従って
				$\tau(\omega) \leq s \leq t$が成り立つ．
		\end{description}
		以上で$\tau$が停止時刻であることが示されたから，次に定理の後半の主張を示す．
		$N'$を除いて$I \ni t \longmapsto X_t(\omega)$が連続である場合，
		$\tau(\omega) = 0$なら$X_0(\omega) \in F$である．
		$\tau(\omega) > 0$のとき，$t < \tau(\omega)\ (\omega \in \Omega \backslash N')$に対しては$X_t(\omega) \in F^c$が成り立っているから，示せばよいのは
		\begin{align}
			X_{\tau(\omega)}(\omega) \in F^{ic}
			\label{eq:closed_set_stopping_time_2}
		\end{align}
		が成り立つことである．$s = \tau(\omega)$とおく．もし$X_s(\omega) \in F^i$であるとすれば
		連続性から或る$\delta$が存在し，$0 < h < \delta$を満たす任意の$h$に対し
		\begin{align}
			X_{s - h}(\omega) \in F^i
		\end{align}
		となるが，
		\begin{align}
			s > s - h \geq \inf{}{\Set{t \in I}{X_t(\omega) \in F}}
		\end{align}
		が成り立ち矛盾が生じるから(\refeq{eq:closed_set_stopping_time_2})が従う．
		\QED
	\end{prf}
	