\section{第一イプシロン定理}
	$A$を$L(PC_{\varepsilon})$の式とするとき，$A$を$L(EC_{\varepsilon})$の式に書き換える．
	\begin{align}
		x^{\varepsilon} &\rightarrow x \\
		(\in \tau \sigma)^{\varepsilon} &\rightarrow \in \tau^{\varepsilon} \sigma^{\varepsilon} \\
		(= \tau \sigma)^{\varepsilon} &\rightarrow = \tau^{\varepsilon} \sigma^{\varepsilon} \\
		(\rightharpoondown \varphi)^{\varepsilon} &\rightarrow \rightharpoondown \varphi^{\varepsilon} \\
		(\vee \varphi \psi)^{\varepsilon} &\rightarrow \vee \varphi^{\varepsilon} \psi^{\varepsilon} \\
		(\wedge \varphi \psi)^{\varepsilon} &\rightarrow \wedge \varphi^{\varepsilon} \psi^{\varepsilon} \\
		(\Longrightarrow \varphi \psi)^{\varepsilon} &\rightarrow \Longrightarrow \varphi^{\varepsilon} \psi^{\varepsilon} \\
		(\exists x \varphi)^{\varepsilon} &\rightarrow \varphi^{\varepsilon}(\varepsilon x \varphi^{\varepsilon}) \\
		(\forall x \varphi)^{\varepsilon} &\rightarrow \varphi^{\varepsilon}(\varepsilon x \rightharpoondown \varphi^{\varepsilon}) \\
		(\varepsilon x \psi)^{\varepsilon} &\rightarrow \varepsilon x \varphi^{\varepsilon}
	\end{align}
	
	$A$が$L(PC_{\varepsilon})$の式で，$x$が$A$に自由に現れて，
	かつ$A$に自由に現れているのが$x$のみであるとき，
	$A^{\varepsilon}$にも$x$が自由に現れて，かつ$A^{\varepsilon}$に
	自由に現れているのは$x$のみである．
	
	\begin{align}
		(\varphi[x/\tau])^{\varepsilon} \rightarrow \varphi^{\varepsilon}
		(\varphi^{\varepsilon}[x/\tau^{\varepsilon}]). \\
	\end{align}
	
	\begin{itembox}[c]{$PC_{\varepsilon}$の証明を$EC_{\varepsilon}$の証明に埋め込む}
		$A$を$L(PC_{\varepsilon})$の文とし，$PC_{\varepsilon} \vdash A$であるとする．
		このとき$EC_{\varepsilon} \vdash A^{\varepsilon}$である．
	\end{itembox}
	
	示すべきことは
	\begin{itemize}
		\item $A \in Ax(PC_{\varepsilon})$ならば$\vdash A^{\varepsilon}$であること．
			\begin{itemize}
				\item $\vdash A$ならば$\vdash A^{\varepsilon}$であること．
				\item $A$に$x$が自由に現れて，かつ自由に現れているのが$x$のみであるとき，
					\begin{align}
						\vdash A^{\varepsilon}(t^{\varepsilon}) \Longrightarrow A^{\varepsilon}(\varepsilon x A^{\varepsilon})
					\end{align}
					であること．
				\item $A$に$x$が自由に現れて，かつ自由に現れているのが$x$のみであるとき，
					\begin{align}
						\vdash A^{\varepsilon}(\varepsilon x \rightharpoondown A^{\varepsilon}) \Longrightarrow A^{\varepsilon}(t^{\varepsilon})
					\end{align}
					であること．
			\end{itemize}
		
		\item $PC_{\varepsilon} \vdash B$かつ$PC_{\varepsilon} \vdash B \Longrightarrow A$である$B$が取れるとき，
			$(B \Longrightarrow A)^{\varepsilon}$は$B^{\varepsilon} \Longrightarrow A^{\varepsilon}$なので
			$EC_{\varepsilon} \vdash B^{\varepsilon}$ならば
			$EC_{\varepsilon} \vdash A^{\varepsilon}$となる．
	\end{itemize}
	
	\begin{screen}
		\begin{thm}[置換補題]
		\end{thm}
	\end{screen}
	
	\begin{sketch}\mbox{}
		\begin{description}
			\item[Case1]
				$B(s)$ (或いは$B(\varepsilon y B)$)とは，
				$B$で自由に現れる$y$を$s$ (或いは$\varepsilon y B$)で置き換えた式である．
				$y$から代わった$s$ (或いは$\varepsilon y B$)の少なくとも一つを部分項として含む形で
				$e$が$B(s)$ (或いは$B(\varepsilon y B)$)に出現しているとする．
				
				実はこれは起こり得ない．もし起きたとすると，$e$に現れる$s$ (或いは$\varepsilon y B$)
				を元の$y$に戻した項を$e'$とすれば，$e'$は$B$に現れる$\varepsilon$項であって
				\footnotemark，$e'$には$y$が自由に現れるので，
				\begin{align}
					rk(e) = rk(e') < rk(\varepsilon y B)
				\end{align}
				が成り立ってしまう．しかしこれは$rk(e)$の最大であることに矛盾する．
				
			\item[Case2]
				$B$の中に$e$は現れないが，$s$の中には$e$が現れる場合．$\theta$を項または式とするとき，
				$\theta$に現れる$e$を$t$に置き換えた式を$\theta^{t}$と書くと，
				\begin{align}
					B^{t} &\equiv B, \\
					(B[s])^{t} &\equiv B^{t}[s^{t}] \\
					&\equiv B[s^{t}], \\
					(B[\varepsilon y B])^{t} &\equiv B^{t}[(\varepsilon y B)^{t}] \\
					&\equiv B[\varepsilon y B^{t}] \\
					&\equiv B[\varepsilon y B]
				\end{align}
				より，$C$は
				\begin{align}
					B[s^{t}] \rightarrow B[\varepsilon y B]
				\end{align}
				である．
				
			\item[Case3]
				$B$に$e$が現れる場合．
				\begin{enumerate}
					\item $e$の中に$y$の自由な出現は無い．なぜならば，$y$が$e$の中に自由に現れていると
						\begin{align}
							rk(e) + 1 \leq rk(\varepsilon y B)
						\end{align}
						となるから．つまり$e$は$\varepsilon y B$には従属していない．ゆえに
						\begin{align}
							deg(e) < deg(\varepsilon y B)
						\end{align}
						である．$deg(e)$は階数が$rk(\pi)$である$\varepsilon$項の次数の最大値であるから
						\begin{align}
							rk(\varepsilon y B) < rk(\pi)
						\end{align}
						が満たされている筈である．
					
					\item $\theta$を項または式とするとき，$\theta$に現れる$e$を$t$に置き換えた式を
						$\theta^{t}$と書くと，$C$は
						\begin{align}
							B^{t}[s^{t}] \rightarrow B^{t}[\varepsilon y B^{t}]
						\end{align}
						となる．実際，
						\begin{align}
							(B[s])^{t} \equiv B^{t}[s^{t}]
						\end{align}
						及び
						\begin{align}
							(B[\varepsilon y B])^{t} \equiv
							B^{t}[(\varepsilon y B)^{t}] \equiv
							B^{t}[\varepsilon y B^{t}]
						\end{align}
						なので．また$B$に現れる$\varepsilon$項で，その中に$y$が自由に現れているものは
						$B^{t}$にもそのまま残っているから
						\begin{align}
							rk(B) = rk(B^{t})
						\end{align}
						となる．ゆえに
						\begin{align}
							rk(\varepsilon y B) = rk(B) + 1 = rk(B^{t}) + 1 = rk(\varepsilon y B^{t})
						\end{align}
						となる．
				\end{enumerate}
		\end{description}
	\end{sketch}
	
	\footnotetext{
		$e'$が$\varepsilon$項であって$B$に現れることの証明．
	}
	
\subsection{アイデア}
	$Ax(EC)$を，$L(EC)$の文からなる命題論理のトートロジーの全体からなる公理系とし，
	$Ax(EC_{\varepsilon})$を，$Ax(EC)$に主要論理式を全て加えた公理系とする．
	
	\begin{itembox}[l]{第一イプシロン定理の方針}
		\begin{itemize}
			\item $B$を$EC$の式とし，$B$が$PC_{\varepsilon}$から証明可能であるとする．
			\item このとき$EC_{\varepsilon}から$$B$への証明$\pi$が得られる．
			\item $e$を，$\pi$の主要$\varepsilon$項のうち階数が最大であって，かつ
				その階数を持つ$\pi$の主要$\varepsilon$項の中で次数が最大であるものとする．
			\item $e$が属する$\pi$の主要論理式の一つ$A(t) \Longrightarrow A(e)$を取る．
			\item $\pi$をベースにして，$A(t) \Longrightarrow A(e)$を用いずに
				$EC_{\varepsilon}$から$B$への証明$\pi'$を構成する．このとき以下が満たされる．
				\begin{enumerate}
					\item $A(t) \Longrightarrow A(e)$を除く$\pi$の主要論理式は
						$\pi'$の主要論理式である．
					\item $e$が属する$\pi'$の主要論理式は，$\pi$の主要論理式
						であったものである．つまり，直感的に書けば
						\begin{align}
							&\Set{\varphi}{\mbox{$\varphi$は$e$が属する$\pi'$の主要論理式}} \\
							&= \Set{\varphi}{\mbox{$\varphi$は$e$が属する$\pi$の主要論理式}} \backslash \{A(t) \Longrightarrow A(e)\}
						\end{align}
						が成り立つということであって，$e$が属する主要論理式は減る一方である．
						また$e$が属する$\pi$の主要論理式が$A(t) \Longrightarrow A(e)$のみ
						であるならば，$\pi'$には$e$が属する主要論理式は現れない．
						
					\item $e$が属する主要論理式が$\pi'$にも残っている場合，
						$e$は$\pi'$の主要$\varepsilon$項の中も階数が最大であって，
						かつその階数を持つ$\pi'$の主要$\varepsilon$項の中で次数も最大である．
					
					\item $\pi'$の主要$\varepsilon$項のうち，$e$と階数が同じであるものは
						$\pi$の主要$\varepsilon$項でもあった．
				\end{enumerate}
				
			\item 上の操作を続けていけば，まずは階数$r_{0} = rk(\pi)$の主要論理式を全て
				$Ax(EC_{\varepsilon})$から除外した公理系$Ax(EC_{\varepsilon})^{r_{0}}$
				から$B$への証明$\pi_{1}$が得られる．このとき
				\begin{align}
					r_{1} \defeq rk(\pi_{1}) < r_{0}
				\end{align}
				である．同様に階数$r_{1}$の主要論理式を全て
				$Ax(EC_{\varepsilon})^{r_{0}}$から除外した公理系
				$Ax(EC_{\varepsilon})^{r_{1}}$から$B$への証明$\pi_{2}$が得られる．
				繰り返せば，いずれは階数$1$以上の主要論理式を全て
				$Ax(EC_{\varepsilon})$から除外した公理系$Ax(EC_{\varepsilon})^{\ast}$
				から$B$への証明$\pi^{\ast}$が得られるが，$Ax(EC_{\varepsilon})^{\ast}$とは
				$Ax(EC_{\varepsilon})$から主要論理式を全て取り除いた公理系であるから，
				$\pi^{\ast}$はトートロジーとモーダスポンネスだけからなる証明である．
				あとは，そこに現れる$\varepsilon$項を$EC$の項に置き換えれば，その式の列は
				$Ax(EC)$から$B$への証明となっている．
		\end{itemize}
	\end{itembox}
	
	$\pi$を$\varphi_{0},\varphi_{1},\cdots,\varphi_{n}$とし，
	$\varphi_{0},\varphi_{1},\cdots,\varphi_{n}$に現れる$e$を$t$に置き換えた式を
	\begin{align}
		\tilde{\varphi}_{0},\ \tilde{\varphi}_{1},\cdots, \tilde{\varphi}_{n}
	\end{align}
	と書く($e$は，どれかの項の部分項であるときも置き換える?)．
	このとき，任意の$0 \leq i \leq n$で
	\begin{enumerate}
		\item $\varphi_{i}$がトートロジーなら$\tilde{\varphi}_{i}$もトートロジーである．
		\item $\varphi_{i}$が主要論理式で，$e$が$\varphi_{i}$の主要項であるならば，
			$\tilde{\varphi}_{i}$は$A(u) \Longrightarrow A(t)$なる形の式である
			\footnotemark．
		\item $\varphi_{i}$が主要論理式で，$e$が$\varphi_{i}$の主要項ではないならば，
			$\tilde{\varphi}_{i}$も主要論理式である．
	\end{enumerate}
	
	\footnotetext{
		$A$と$B$を式とし，$A$には$x$が自由に現れ，$B$には$y$が自由に現れ，
		かつ$A$に自由に現れるのは$x$のみで，$B$に自由に現れるのは$y$のみであるとする．
		このとき，$\varepsilon x A$と$\varepsilon y B$が記号列として一致すれば，
		$A(\varepsilon x A)$と$B(\varepsilon y B)$も記号列として一致する．
	}
	
	$\varphi$が$Ax(EC_{\varepsilon})^{-}$の公理ならば，
	$\tilde{\varphi}_{i}$と$\tilde{\varphi}_{i+1}$の間に
	\begin{align}
		&\tilde{\varphi}_{i} \Longrightarrow 
		\left( A(t) \Longrightarrow \tilde{\varphi}_{i} \right), \\
		&A(t) \Longrightarrow \tilde{\varphi}_{i}
	\end{align}
	を挿入する．$\varphi_{i}$が$\varphi_{j}$と$\varphi_{k}$からモーダスポンネスで得られる場合は，
	$\tilde{\varphi}_{i}$を
	\begin{align}
		&\left( A(t) \Longrightarrow \tilde{\varphi}_{j} \right)
		\Longrightarrow \left[ \left( A(t) \Longrightarrow 
		\left( \tilde{\varphi}_{j}\Longrightarrow \tilde{\varphi}_{i} \right) \right)
		\Longrightarrow \left( A(t) \Longrightarrow \tilde{\varphi}_{i} \right) \right], \\
		&\left( A(t) \Longrightarrow 
		\left( \tilde{\varphi}_{j}\Longrightarrow \tilde{\varphi}_{i} \right) \right)
		\Longrightarrow \left( A(t) \Longrightarrow \tilde{\varphi}_{i} \right), \\
		&A(t) \Longrightarrow \tilde{\varphi}_{i}
	\end{align}
	で置き換える．すると，$Ax(EC_{\varepsilon})^{-}$から$A(t) \Longrightarrow B$への証明が得られる．
	$\varphi_{i}$が$e$が属する主要論理式$A(s) \Longrightarrow A(e)$であるときは，
	$\tilde{\varphi}_{i}$とは
	\begin{align}
		A(s') \Longrightarrow A(t)
	\end{align}
	なる形の式であるが
	\footnote{
		$x$を$A$に現れている自由な変項とすれば，$e$とは$\varepsilon x A$のことであるし，
		$A(\varepsilon x A)$とは$A$に自由に現れる$x$を$\varepsilon x A$に置換した式である．
		$A$には$\varepsilon x A$は現れていないので，というのも$\varepsilon x A$が登場するのは
		$A$が作られた後であるからだが，$A(e)$に現れる$e$を$t$に変換した式は
		$A(t)$になる．同様に，$A(s)$に$e$が現れるとすれば，その$e$は$y$に代入された$s$の
		部分項でしかありえない．すなわち，$A(s)$に現れる$e$を$t$で置換した式は，
		$s'$を$s$に現れる$e$を$t$に変換した項として ($s$に$e$が現れなければ$s'$は$s$である)
		$A(s')$となるわけである．
	}，$\tilde{\varphi}_{i}$を
	\begin{align}
		&A(t) \Longrightarrow (A(s') \Longrightarrow A(t)), \\
		&A(s') \Longrightarrow A(t)
	\end{align}
	で置き換える．
	
	同様に$Ax(EC_{\varepsilon})^{-}$から$\rightharpoondown A(t) \Longrightarrow B$
	への証明を構成する．これは$\pi$に現れる$e$を$t$に置き換えはしない．
	$\varphi_{i}$が$Ax(EC_{\varepsilon})^{-}$の公理ならば，
	$\varphi_{i}$と$\varphi_{i+1}$の間に
	\begin{align}
		&\varphi_{i} \Longrightarrow (\rightharpoondown A(t) \Longrightarrow \varphi_{i}), \\
		&\rightharpoondown A(t) \Longrightarrow \varphi_{i}
	\end{align}
	を挿入する．$\varphi_{i}$が$\varphi_{j}$と$\varphi_{k}$からモーダスポンネスで得られる場合は，
	$\varphi_{i}$を
	\begin{align}
		&(\rightharpoondown A(t) \Longrightarrow \varphi_{j}) \Longrightarrow
		[(\rightharpoondown A(t) \Longrightarrow 
		(\varphi_{j}\Longrightarrow \varphi_{i}))
		\Longrightarrow (\rightharpoondown A(t) \Longrightarrow \varphi_{i})], \\
		&(\rightharpoondown A(t) \Longrightarrow 
		(\varphi_{j} \Longrightarrow \varphi_{i}))
		\Longrightarrow (\rightharpoondown A(t) \Longrightarrow \varphi_{i}), \\
		&\rightharpoondown A(t) \Longrightarrow \varphi_{i}
	\end{align}
	で置き換える．$\varphi_{i}$が$A(t) \Longrightarrow A(e)$であるときは，$\varphi_{i}$を
	\begin{align}
		\rightharpoondown A(t) \Longrightarrow (A(t) \Longrightarrow A(e))
	\end{align}
	で置き換える．
	
	以上で$Ax(EC_{\varepsilon})^{-}$から$A(t) \Longrightarrow B$と
	$\rightharpoondown A(t) \Longrightarrow B$への証明が得られたが，
	これに
	\begin{align}
		&(A(t) \Longrightarrow B) \Longrightarrow
		((\rightharpoondown A(t) \Longrightarrow B) \Longrightarrow
		((A(t) \Longrightarrow B) \wedge (\rightharpoondown A(t) \Longrightarrow B))), \\
		&(\rightharpoondown A(t) \Longrightarrow B) \Longrightarrow
		((A(t) \Longrightarrow B) \wedge (\rightharpoondown A(t) \Longrightarrow B)), \\
		&(A(t) \Longrightarrow B) \wedge (\rightharpoondown A(t) \Longrightarrow B), \\
		&((A(t) \Longrightarrow B) \wedge (\rightharpoondown A(t) \Longrightarrow B))
		\Longrightarrow ((A(t) \vee \rightharpoondown A(t)) \Longrightarrow B), \\
		&(A(t) \vee \rightharpoondown A(t)) \Longrightarrow B, \\
		&A(t) \vee \rightharpoondown A(t), \\
		&B
	\end{align}
	を追加すれば，$Ax(EC_{\varepsilon})^{-}$から$B$への証明となる．
	