\section{The Doob-Meyer Decomposition}
	\begin{itembox}[l]{martingale transform}
		If $A = \Set{A_n,\mathscr{F}_n}{n=0,1,\cdots}$ is predictable with $E|A_n|<\infty$ for every $n$,
		and if $\Set{M_n,\mathscr{F}_n}{n=0,1,\cdots}$ is bounded martingale, then the martingale transform of $A$
		by $M$ defined by
		\begin{align}
			Y_0 = 0 \quad \mbox{and} \quad
			Y_n = \sum_{k=1}^n A_k (M_k - M_{k-1});
			\quad n \geq 1, 
		\end{align}
		is itself a martingale.
	\end{itembox}
	
	\begin{prf}
		$A_k(M_k - M_{k-1})\ (k \leq n)$は$\mathscr{F}_n/\borel{\R}$-可測であるから
		$(Y_n)_{n=1}^\infty$は$(\mathscr{F}_n)$-適合である．また
		\begin{align}
			E|Y_n| = E\left| \sum_{k=1}^n A_k (M_k - M_{k-1}) \right|
			\leq \sum_{k=1}^n \left\{\esssup{\omega \in \Omega}{\left(|M_k(\omega)|+|M_{k-1}(\omega)|\right)}\right\} E|A_k| < \infty
		\end{align}
		が成り立つ．更に任意の$n \geq 1$に対し
		\begin{align}
			\cexp{Y_n}{\mathscr{F}_{n-1}}
			&= \cexp{A_n(M_n - M_{n-1}) + Y_{n-1}}{\mathscr{F}_{n-1}} \\
			&= A_n(\cexp{M_n}{\mathscr{F}_{n-1}} - M_{n-1}) + Y_{n-1}
			= Y_{n-1},
			\quad \mbox{a.s. $P$}
		\end{align}
		が満たされる．
		\QED
	\end{prf}
	
	\begin{itembox}[l]{Doob's decomposition}
		Any submartingale $\Set{X_n,\mathscr{F}_n}{n=0,1,\cdots}$ admits the Doob decomposition
		$X_n = M_n + A_n$ as the summation of a martingale $\{M_n,\mathscr{F}_n\}$ and an 
		predictable and increasing sequence $\{A_n,\mathscr{F}_n\}$.
		This decomposition is unique.
	\end{itembox}
	
	\begin{prf}\mbox{}
		\begin{description}
			\item[第一段]
				Doob分解が存在するとして，分解の一意性を示す．
				実際，分解が存在すれば
				\begin{align}
					A_{n+1} - A_n = \cexp{A_{n+1}-A_n}{\mathscr{F}_{n}}
					= \cexp{X_{n+1}-X_n}{\mathscr{F}_{n}} - \cexp{M_{n+1}-M_n}{\mathscr{F}_{n}}
					= \cexp{X_{n+1}-X_n}{\mathscr{F}_{n}},
					\quad \mbox{a.s. $P$}
				\end{align}
				が成立し，$A_n\ (n \geq 1)$は
				\begin{align}
					A_n = \sum_{k=0}^{n-1} \cexp{X_{k+1}-X_k}{\mathscr{F}_{k}},
					\quad \mbox{a.s. $P$}
				\end{align}
				を満たすことになり分解の一意性が出る．
				
			\item[第二段]
				分解可能性を示す．
				\begin{align}
					A_0 \coloneqq 0,
					\quad A_n \coloneqq \sum_{k=0}^{n-1} \cexp{X_{k+1}-X_k}{\mathscr{F}_{k}},
					\quad (n=1,2,\cdots)
				\end{align}
				と定めれば$(A_n)$は可予測かつ可積分であり，
				\begin{align}
					A_{n+1} - A_n = \cexp{X_{k+1}-X_k}{\mathscr{F}_{k}} \geq 0,
					\quad \mbox{a.s. $P$}
					\ (\forall n \geq 1)
				\end{align}
				より増大過程である．また$M_n \coloneqq X_n - A_n$により$(\mathscr{F}_n)$-適合かつ可積分な過程を定めれば，
				\begin{align}
					\cexp{M_{n+1} - M_n}{\mathscr{F}_n}
					&= \cexp{(X_{n+1} - X_n)-(A_{n+1}-A_n)}{\mathscr{F}_n} \\
					&= \cexp{X_{n+1} - X_n}{\mathscr{F}_n} - \cexp{\cexp{X_{n+1} - X_n}{\mathscr{F}_n}}{\mathscr{F}_n}
					= 0,
					\quad \mbox{a.s. $P$}
				\end{align}
				が成り立つから$\{M_n,\mathscr{F}_n\}$はマルチンゲールである．
				\QED
		\end{description}
	\end{prf}
	
	\begin{itembox}[l]{Proposition 4.3 修正}
		An increasing random sequence $A$ has a predictable modification
		if and only if it is natural.
	\end{itembox}
	
	\begin{prf}
		$A$が可予測な修正$\tilde{A}$を持つとき，任意の有界マルチンゲール$M$に対して
		\begin{align}
			\tilde{Y}_0 \coloneqq 0,
			\quad \tilde{Y}_n \coloneqq \sum_{k=1}^n \tilde{A}_k(M_k - M_{k-1}); \quad n \geq 1
		\end{align}
		は$(\mathscr{F}_n)$-マルチンゲールとなる．
		このとき$M_n \tilde{A}_n$と$\sum_{k=1}^n M_{k-1}(\tilde{A}_k - \tilde{A}_{k-1})$は可積分であり
		\begin{align}
			0 = E \tilde{Y}_n = E\left[ M_n \tilde{A}_n - \sum_{k=1}^n M_{k-1}(\tilde{A}_k - \tilde{A}_{k-1}) \right]
			= E(M_n A_n) - E\sum_{k=1}^n M_{k-1}(A_k - A_{k-1}),
			\quad (\forall n \geq 1)
		\end{align}
		が成り立つから$A$はナチュラルである．逆に$A$がナチュラルであるとき，
		有界マルチンゲール$M$に対して
		\begin{align}
			0 &= E\left[ M_n A_n - \sum_{k=1}^n M_{k-1}(A_k - A_{k-1}) \right] \\
			&= E\left[ A_n(M_n-M_{n-1}) \right] - E\left[ M_{n-1} A_{n-1} - \sum_{k=1}^{n-1} M_{k-1}(A_k - A_{k-1}) \right] \\
			&= E\left[ A_n(M_n-M_{n-1}) \right],
			\quad (\forall n \geq 1)
		\end{align}
		が成り立つ．一方で
		\begin{align}
			E\left[ M_{n-1}(A_n-\cexp{A_n}{\mathscr{F}_{n-1}}) \right]
			&= E\left[ \cexp{M_{n-1} (A_n-\cexp{A_n}{\mathscr{F}_{n-1}})}{\mathscr{F}_{n-1}} \right] \\
			&= E\left[ M_{n-1} \cexp{A_n-\cexp{A_n}{\mathscr{F}_{n-1}}}{\mathscr{F}_{n-1}} \right]
			= 0,
			\quad (\forall n \geq 1)
		\end{align}
		及び
		\begin{align}
			E\left[ \cexp{A_n}{\mathscr{F}_{n-1}}(M_n-M_{n-1}) \right]
			&= E\left[ \cexp{ \cexp{A_n}{\mathscr{F}_{n-1}}(M_n-M_{n-1})}{\mathscr{F}_{n-1}} \right] \\
			&= E\left[ \cexp{A_n}{\mathscr{F}_{n-1}}\cexp{M_n-M_{n-1}}{\mathscr{F}_{n-1}} \right]
			= 0,
			\quad (\forall n \geq 1)
		\end{align}
		となるから
		\begin{align}
			E\left[ M_n(A_n - \cexp{A_n}{\mathscr{F}_{n-1}}) \right]
			&= E\left[ A_n(M_n-M_{n-1}) \right] \\
			&\quad	+ E\left[ M_{n-1}(A_n-\cexp{A_n}{\mathscr{F}_{n-1}}) \right] \\
			&\quad	- E\left[ \cexp{A_n}{\mathscr{F}_{n-1}}(M_n-M_{n-1}) \right] \\
			&= 0,
			\quad (\forall n \geq 1)
		\end{align}
		が従う．ここで各$n \geq 1$に対し，
		$\borel{\R}/\borel{\R}$-可測関数$\operatorname{sgn} = \defunc_{(0,\infty)} - \defunc_{(-\infty,0)}$を用いて
		\begin{align}
			M^{(n)}_k \coloneqq 
			\begin{cases}
				\sgn{A_n - \cexp{A_n}{\mathscr{F}_{n-1}}}, & (k \geq n), \\
				\cexp{\sgn{A_n - \cexp{A_n}{\mathscr{F}_{n-1}}}}{\mathscr{F}_k}, & (0 \leq k < n)
			\end{cases}
		\end{align}
		により有界マルチンゲール$M^{(n)} = \Set{M^{(n)}_k,\mathscr{F}_k}{k=0,1,\cdots}$を定めれば，
		\begin{align}
			0 = E\left[ M^{(n)}_n(A_n - \cexp{A_n}{\mathscr{F}_{n-1}}) \right] 
			= E\left| A_n - \cexp{A_n}{\mathscr{F}_{n-1}} \right|,
			\quad (\forall n \geq 1)
		\end{align}
		が得られ
		\begin{align}
			\tilde{A}_0 \coloneqq 0,
			\quad \tilde{A}_n \coloneqq \cexp{A_n}{\mathscr{F}_{n-1}}; \quad n \geq 1
		\end{align}
		は$A$の可予測な修正となる．
		\QED
	\end{prf}