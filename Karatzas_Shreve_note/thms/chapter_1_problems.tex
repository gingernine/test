\section{Stochastic Processes and $\sigma$-Fields}
\begin{itembox}[l]{Problem 1.5}
	Let $Y$ be a modification of $X$, and suppose that every 
	sample path of both processes are right-continuous sample paths. 
	Then $X$ and $Y$ are indistinguishable.
\end{itembox}

\begin{prf}
	Karatzas-Shreveの問題文には``suppose that both processes have a.s. right-continuous sample paths''
	と書いてあるがこれは誤植である．実際，或る零集合$\emptyset \neq N \in \mathscr{F}$が存在し，
	$\omega \in \Omega \backslash N$に対する$X,Y$のパスが右連続であるとする．このとき
	\begin{align}
		\left\{ X_t = Y_t,\ \forall t \geq 0 \right\}
		&= \left\{ X_t = Y_t,\ \forall t \geq 0 \right\} \cap N
			+ \left\{ X_t = Y_t,\ \forall t \geq 0 \right\} \cap N^c \\
		&= \left\{ X_t = Y_t,\ \forall t \geq 0 \right\} \cap N
			+ \bigcap_{r \in \Q \cap [0,\infty)} \left\{ X_r = Y_r \right\} \cap N^c
	\end{align}
	が成り立つが，右辺第一項は$(\Omega,\mathscr{F},P)$が完備である場合でないと
	可測集合であるという保証がない．従って全てのサンプルパスが
	右連続であると仮定し直す必要がある．
	この場合
	\begin{align}
		\left\{ X_t = Y_t,\ \forall t \geq 0 \right\}
		= \bigcap_{r \in \Q \cap [0,\infty)} \left\{ X_r = Y_r \right\}
	\end{align}
	が成立するから，$P(X_r = Y_r) = 1\   (\forall r \geq 0)$より
	\begin{align}
		P(X_t = Y_t,\ \forall t \geq 0)
		= P \biggl( \bigcap_{r \in \Q \cap [0,\infty)} \left\{ X_r = Y_r \right\} \biggr)
		= 1
	\end{align}
	が従う．
	\QED
\end{prf}

\begin{itembox}[l]{Problem 1.7}
		Let $X$ be a process with every sample path RCLL. 
		Let $A$ be the event that $X$ is continuous on $[0,t_0)$. 
		Show that $A \in \mathscr{F}^X_{t_0}$.
\end{itembox}

\begin{prf}
	$[0,t_0)$に属する有理数の全体を$\Q^* \coloneqq \Q \cap [0,t_0)$と表すとき，
	\begin{align}
		A = \bigcap_{m \geq 1} \bigcup_{n \geq 1} \bigcap_{\substack{p,q \in \Q^* \\ |p-q| < 1/n}}
		\Set{\omega \in \Omega}{\left|X_p(\omega) - X_q(\omega) \right| < \frac{1}{m}}
	\end{align}
	が成立することを示せばよい．これが示されれば，$\omega \longmapsto \left(X_p(\omega), X_q(\omega) \right)$の
	$\mathscr{F}^X_{t_0}/\borel{\R^2}$-可測性と
	\begin{align}
		\Phi:\R \times \R \ni (x,y) \longmapsto |x-y| \in \R
	\end{align}
	の$\borel{\R^2}/\borel{\R}$-可測性より
	\begin{align}
		\Set{\omega \in \Omega}{\left|X_p(\omega) - X_q(\omega) \right| < \frac{1}{m}}
		= \Set{\omega \in \Omega}{\left(X_p(\omega), X_q(\omega) \right) \in 
		\Phi^{-1}\left(B_{1/m}(0)\right)}
		\in \mathscr{F}^X_{t_0}
	\end{align}
	が得られ$A \in \mathscr{F}^X_{t_0}$が従う．$\left(B_{1/m}(0) = \Set{x \in \R}{|x| < 1/m}.\right)$
	\begin{description}
		\item[第一段]
			$\omega \in A^c$を任意にとる．このとき
			或る$s \in (0,t_0)$が存在して，$t \longmapsto X_t(\omega)$は
			$t = s$において左側不連続である．従って或る$m \geq 1$については，
			任意の$n \geq 1$に対し$0< s-u < 1/3n$を満たす
			$u$が存在して
			\begin{align}
				\left|X_u(\omega) - X_s(\omega) \right| \geq \frac{1}{m}
			\end{align}
			を満たす．一方でパスの右連続性より
			$0 < p - s,\ q - u < 1/3n$を満たす$p,q \in \Q^*$が存在して
			\begin{align}
				\left|X_p(\omega) - X_s(\omega) \right| < \frac{1}{4m},
				\quad \left|X_q(\omega) - X_u(\omega) \right| < \frac{1}{4m}
			\end{align}
			が成立する．このとき$0 < |p - q| < 1/n$かつ
			\begin{align}
				\left|X_p(\omega) - X_q(\omega) \right|
				\geq \left|X_p(\omega) - X_s(\omega) \right|
					- \left|X_s(\omega) - X_u(\omega) \right|
					- \left|X_q(\omega) - X_u(\omega) \right|
				\geq \frac{1}{2m}
			\end{align}
			が従い
			\begin{align}
				\omega \in \bigcup_{m \geq 1} \bigcap_{n \geq 1} \bigcup_{\substack{p,q \in \Q^* \\ |p-q| < 1/n}}
		\Set{\omega \in \Omega}{\left|X_p(\omega) - X_q(\omega) \right| \geq \frac{1}{m}}
			\end{align}
			を得る．
		
		\item[第二段]
			任意に$\omega \in A$を取る．各点で有限な左極限が存在するという仮定から，
			\begin{align}
				X_{t_0}(\omega) \coloneqq \lim_{t \uparrow t_0}X_t(\omega)
			\end{align}
			と定めることにより
			\footnote{
				実際$X_{t_0}(\omega)$は所与のものであるが，いまは$[0,t_0]$上での連続性を考えればよいから
				便宜上値を取り替える．
			}
			$t \longmapsto X_t(\omega)$は$[0,t_0]$上で一様連続となる．
			従って
			\begin{align}
				\omega \in \bigcap_{m \geq 1} \bigcup_{n \geq 1} \bigcap_{\substack{p,q \in \Q^* \\ |p-q| < 1/n}}
		\Set{\omega \in \Omega}{\left|X_p(\omega) - X_q(\omega) \right| < \frac{1}{m}}
			\end{align}
			を得る．
			\QED
	\end{description}
\end{prf}

\begin{screen}
	\begin{dfn}[積$\sigma$-加法族]
		$\Lambda$を空でない任意濃度の添字集合とする．
		$(S_\lambda,\mathcal{M}_\lambda),\ \lambda \in \Lambda$を可測空間の族とし，
		$S \coloneqq \prod_{\lambda \in \Lambda} S_\lambda$とおく．$\lambda$射影を
		$p_\lambda:S \longrightarrow S_\lambda,\ \lambda \in \Lambda$と書くとき，
		\begin{align}
			\Set{p_\lambda^{-1}(A_\lambda)}{A_\lambda \in \mathcal{M}_\lambda,\ \lambda \in \Lambda}
		\end{align}
		が生成する$\sigma$-加法族を
		$(\mathcal{M}_\lambda)_{\lambda \in \Lambda}$の積$\sigma$-加法族と呼び，
		$\prod_{\lambda \in \Lambda} \mathcal{M}_\lambda$で表す．
		$\Lambda = \{1,2,\cdots\}$の場合，
		\begin{align}
			\prod_{\lambda \in \Lambda} \mathcal{M}_\lambda
			= \mathcal{M}_1 \otimes \mathcal{M}_2 \otimes \cdots
		\end{align}
		とも表記する．
	\end{dfn}
\end{screen}
\begin{itembox}[l]{Lemma1 for Exercise 1.8}
	$\Lambda$を空でない高々可算集合とする．
	$(S_\lambda)_{\lambda \in \Lambda}$を第二可算公理を満たす位相空間の族とし
	$S \coloneqq \prod_{\lambda \in \Lambda} S_\lambda$とおくとき，
	\begin{align}
		\borel{S} = \prod_{\lambda \in \Lambda} \borel{S_\lambda}
		\label{eq:lem1_for_chap_1_exercise_1_8_1}
	\end{align}
	が成立する．($S$には直積位相を導入する．この場合，$S$もまた第二可算公理を満たす．)
\end{itembox}

\begin{prf}
	各$S_\lambda$の開集合系及び可算基を$\mathcal{O}_\lambda,\ \mathscr{B}_\lambda$，
	$S$の開集合系を$\mathscr{O}$とし，
	また$\lambda$射影を$p_\lambda:S \longrightarrow S_\lambda$と書く．
	先ず，任意の$O_\lambda \in \mathscr{O}_\lambda$に対して
	$p_\lambda^{-1}(O_\lambda) \in \mathscr{O}$
	が満たされるから
	\begin{align}
		\mathscr{O}_\lambda 
		\subset \Set{A_\lambda \in \borel{S_\lambda}}{p_\lambda^{-1}(A_\lambda) \in \borel{S}}
	\end{align}
	が従い，右辺が$\sigma$-加法族であるから
	\begin{align}
		\prod_{\lambda \in \Lambda} \borel{S_\lambda}
		= \sgmalg{\Set{p_\lambda^{-1}(A_\lambda)}{A_\lambda \in \borel{S_\lambda},\ \lambda \in \Lambda}} \subset \borel{S}
	\end{align}
	を得る．一方で
	\begin{align}
		\mathscr{B} \coloneqq 
		\Set{\bigcap_{\lambda \in \Lambda'} p_\lambda^{-1}(B_\lambda)}{B_\lambda \in \mathscr{B}_\lambda,\ \Lambda' \subset \Lambda:finite\ subset}
	\end{align}
	は$\mathscr{O}$の基底の一つである．実際，任意に$O \in \mathscr{O}$を取れば，
	任意の$x \in O$に対し或る有限集合$\Lambda' \subset \Lambda$が存在して
	\begin{align}
		x \in \bigcap_{\lambda \in \Lambda'} p_\lambda^{-1} (O_\lambda) \subset O
	\end{align}
	が成立するが，更に$S_\lambda$の第二可算性より或る
	$\mathscr{B}'_\lambda \subset \mathscr{B}_\lambda\ (\lambda \in \Lambda')$が存在して
	\begin{align}
		x \in \bigcap_{\lambda \in \Lambda'} p_\lambda^{-1} (O_\lambda)
		= \bigcap_{\lambda \in \Lambda'} \bigcup_{B_{\lambda} \in \mathscr{B}'_\lambda} p_\lambda^{-1} (B_{\lambda})
	\end{align}
	が満たされる．すなわち，任意の$O \in \mathscr{O}$は
	\begin{align}
		O = \bigcup_{E \in \mathscr{B}'} E,
		\quad (\exists\mathscr{B}' \subset \mathscr{B})
	\end{align}
	と表される．$\mathscr{B}$は高々可算の濃度を持ち
	\footnote{
		$L_0 \coloneqq 
		\Set{\Lambda'}{\Lambda' \subset \Lambda:finite\ subset}$は
		高々可算集合である．実際，$\Lambda_n \coloneqq \Lambda \times \cdots \times \Lambda\ 
		(\mbox{$n$ copies of $\Lambda$})$として
		$L \coloneqq \bigcup_{n=1}^{\# \Lambda} \Lambda_n$とおき，
		$(x_1,\cdots,x_n) \in L$に対し$\{x_1,\cdots,x_n\} \in L_0$を対応させる
		$f:L \longrightarrow L_0$を考えれば全射であるから
		$\card{L_0} \leq \card{L} \leq \aleph_0$が従う．
	}，
	$\mathscr{B} \subset \prod_{\lambda \in \Lambda} \borel{S_\lambda}$が満たされるから
	\begin{align}
		\mathscr{O} \subset \prod_{\lambda \in \Lambda} \borel{S_\lambda}
	\end{align}
	が従い(\refeq{eq:lem1_for_chap_1_exercise_1_8_1})を得る．
	\QED
\end{prf}

\begin{itembox}[l]{Lemma2 for Exercise 1.8}
	$T = \{1,2,\cdots\}$を高々可算集合とし，
	$S_i$を第二可算公理を満たす位相空間，$X_i$を
	確率空間$(\Omega,\mathscr{F},P)$上の$S_i$-値確率変数とする$(i \in T)$．
	このとき，任意の並び替え$\pi:T \longrightarrow T$
	に対して$S \coloneqq \prod_{i \in T} S_{\pi(i)}$とおけば次が成立する:
	\begin{align}
		\sigma(X_i;\ i \in T) = \Set{\left\{ (X_{\pi(1)},X_{\pi(2)},\cdots) \in A \right\}}{A \in \borel{S}}.
		\label{eq:lem2_for_chap_1_exercise_1_8_1}
	\end{align}
\end{itembox}

\begin{prf}\mbox{}
	\begin{description}
		\item[第一段]
			射影$S \longrightarrow S_{\pi(n)}$を$p_n$で表す．
			任意に$t_i \in T$を取り$n \coloneqq \pi^{-1}(i)$とおけば，
			任意の$B \in \borel{S_n}$に対して
			\begin{align}
				X_i^{-1}(B) = \left\{ (\cdots, X_{\pi(n)},\cdots) \in p_n^{-1}(B) \right\} \in \Set{\left\{ (X_{\pi(1)}, X_{\pi(2)},\cdots) \in A \right\}}{A \in \borel{S}}
			\end{align}
			が成り立つから$\sigma(X_i;\ i \in T) \subset 
			\Set{\left\{ (X_{\pi(1)}, X_{\pi(2)},\cdots) \in A \right\}}{A \in \borel{S}}$が従う．
		
		\item[第二段]
			任意の有限部分集合$j \in T$と$B_j \in \borel{S_{\pi(j)}}$に対し
			\begin{align}
				\left\{ (X_{\pi(1)}, X_{\pi(2)},\cdots) \in p_j^{-1}(B_j) \right\}
				= X_{\pi(j)}^{-1}(B_j)
				\in \sigma(X_i;\ i \in T)
			\end{align}
			が成立するから
			\begin{align}
				\Set{p_i^{-1}(B_i)}{B_i \in \borel{S_{\pi(i)}},\ i \in T}
				\subset \Set{A \in \borel{S}}{\left\{ (X_{\pi(1)}, X_{\pi(2)},\cdots) \in A \right\} \in \sigma(X_i;\ i \in T)}
			\end{align}
			が従う．右辺は$\sigma$-加法族であり，前補題より左辺は$\borel{S}$を生成するから
			前段と併せて(\refeq{eq:lem2_for_chap_1_exercise_1_8_1})を得る．
			\QED
	\end{description}
\end{prf}

\begin{itembox}[l]{Lemma3 for Exercise 1.8}
	$X = \Set{X_t}{0 \leq t < \infty}$を確率空間$(\Omega,\mathscr{F},P)$上の$\R^d$-値確率過程とする．
	任意の空でない$S \subset [0,\infty)$に対し
	\begin{align}
		\mathcal{F}^X_S \coloneqq \sigma(X_s;\ s \in S)
	\end{align}
	とおくとき，任意の空でない$T \subset [0,\infty)$に対して次が成立する:
	\begin{align}
		\mathcal{F}^X_T \coloneqq \bigcup_{S \subset T:at\ most\ countable} \mathcal{F}^X_S.
		\label{eq:lem3_for_chap_1_exercise_1_8_1}
	\end{align}
\end{itembox}

\begin{prf}
	便宜上
	\begin{align}
		\mathcal{F} \coloneqq \bigcup_{S \subset T:at\ most\ countable} \mathcal{F}^X_S
	\end{align}
	とおく．まず，任意の$S \subset T$に対し$\mathcal{F}^X_S \subset \mathcal{F}^X_T$が成り立つから
	\begin{align}
		\mathcal{F} \subset \mathcal{F}^X_T
	\end{align}
	が従う．また$\sigma(X_t) = \mathcal{F}^X_{\{t\}},\ (\forall t \in T)$より
	\begin{align}
		\bigcup_{t \in T} \sigma(X_t) \subset \mathcal{F}
	\end{align}
	が成り立つから，あとは$\mathcal{F}$が$\sigma$-加法族であることを示せばよい．実際，
	$\mathcal{F}$は$\sigma$-加法族の合併であるから$\Omega$を含みかつ補演算で閉じる．
	また$B_n \in \mathcal{F},\ n=1,2,\cdots$に対しては，$B_n \in \mathcal{F}^X_{S_n}$を満たす
	高々可算集合$S_n \subset T$が対応して
	\begin{align}
		\bigcup_{n=1}^\infty \mathcal{F}^X_{S_n}
		= \bigcup_{n=1}^\infty \sigma(X_s;\ s \in S_n)
		\subset \sigma\biggl(X_s;\ s \in \bigcup_{n=1}^\infty S_n \biggr)
	\end{align}
	が成り立つから，
	\begin{align}
		\bigcup_{n=1}^\infty B_n \in \sigma\biggl(X_s;\ s \in \bigcup_{n=1}^\infty S_n \biggr)
		\subset \mathcal{F}
	\end{align}
	が従う．ゆえに$\mathcal{F}$は$\sigma$-加法族であり
	(\refeq{eq:lem3_for_chap_1_exercise_1_8_1})を得る．
	\QED
\end{prf}

\begin{itembox}[l]{Exercise 1.8}
	Let $X$ be a process whose sample paths are RCLL almost surely, 
	and let $A$ be the event that $X$ is continuous on $[0,t_0)$. Show 
	that $A$ can fail to be in $\mathscr{F}^X_{t_0}$, but if $\Set{\mathscr{F}_t}{t \geq 0}$ is 
	a fitration satisfying $\mathscr{F}^X_t \subset \mathscr{F}_t,\ t \geq 0$, and 
	$\mathscr{F}^X_{t_0}$ contains all $P$-null sets of $\mathscr{F}$, then $A \in \mathscr{F}_{t_0}$.
\end{itembox}

\begin{prf}\mbox{}
	\begin{description}
		\item[第一段]
			高々可算な集合$S = \{t_1,t_2,\cdots\} \subset [0,t_0]$に対し，昇順に並び替えたものを
			$t_{\pi(1)} < t_{\pi(2)} < \cdots$と表し
			\begin{align}
				\mathcal{F}^X_S \coloneqq 
				\Set{\left\{(X_{t_{\pi(1)}},X_{t_{\pi(2)}},\cdots) \in B \right\}}{B \in \borel{(\R^d)^{\# S}}}
			\end{align}
			とおく．ただし$S$が可算無限の場合は$(\R^d)^{\# S} = \R^\infty$である．
			このとき(\refeq{eq:lem2_for_chap_1_exercise_1_8_1})より
			\begin{align}
				\sigma(X_s;\ s \in S) = \mathcal{F}^X_S
			\end{align}
			が成り立ち，(\refeq{eq:lem3_for_chap_1_exercise_1_8_1})より
			\begin{align}
				\mathscr{F}^X_{t_0}
				= \sigma(X_t;\ 0 \leq t \leq t_0)
				= \bigcup_{S \subset [0,t_0]:at\ most\ countable} \mathcal{F}^X_S
			\end{align}
			が満たされる．すなわち，$\mathscr{F}^X_{t_0}$の任意の元は
			$\left\{(X_{t_1},X_{t_2},\cdots) \in B \right\},\ (t_1 < t_2 < \cdots)$の形で表される．
			
		\item[第二段]
	\end{description}
\end{prf}

\begin{itembox}[l]{Problem 1.10 unsolved}
		Let $X$ be a process with every sample path LCRL, and 
		let A be the event that $X$ is continuous on $[0,x_0]$.
		Let $X$ be adapted to a right-continuous filtration 
		$(\mathscr{F}_t)_{t \geq 0}$. Show that $A \in \mathscr{F}_{t_0}$.
\end{itembox}

\begin{prf}\mbox{}
	\begin{description}
		\item[第一段]
			$\Q^* \coloneqq \Q \cap [0,t_0]$とおく．
			いま，任意の$n \geq 1$と$r \in \Q^*$に対し
			\begin{align}
				B_n (r) \coloneqq
				\bigcup_{m \geq 1} \bigcap_{k \leq m} 
				\Set{\omega \in \Omega}{\left| X_r(\omega)-X_{r+\frac{1}{k}}(\omega) \right| \leq \frac{1}{n}}
			\end{align}
			と定めるとき，
			\begin{align}
				A = \bigcap_{r \in \Q^*} \bigcap_{n \geq 1} B_n(r)
			\end{align}
			が成立することを示す．これが示されれば，
			\begin{align}
				\Set{\omega \in \Omega}{\left| X_r(\omega)-X_{r+\frac{1}{k}}(\omega) \right| \leq \frac{1}{n}}
				\in \mathscr{F}_{r+\frac{1}{k}},
				\quad (\forall r \in \Q^*,\ k \geq 1)
			\end{align}
			とフィルトレーションの右連続性から
			\begin{align}
				B_n (r) \in \bigcap_{k \geq m} \mathscr{F}_{r+\frac{1}{k}} = \mathscr{F}_{r+} = \mathscr{F}_{r}
			\end{align}
			が従い$A \in \mathscr{F}_{t_0}$が出る．
		
		\item[第二段]
			
	\end{description}
\end{prf}

\begin{itembox}[l]{Problem 1.16}
	If the process $X$ is measurable and the random time $T$ is finite, 
	then the function $X_T$ is a random variable.
\end{itembox}

\begin{prf}
	\begin{align}
		\tau:\Omega \ni \omega \longmapsto (T(\omega),\omega) \in [0,\infty) \times \Omega
	\end{align}
	とおけば，
	任意の$A \in \borel{[0,\infty)},\ B \in \mathscr{F}$に対して
	\begin{align}
		\tau^{-1}(A \times B) = \Set{\omega \in \Omega}{(T(\omega),\omega) \in A \times B}
		= T^{-1}(A) \cap B \in \mathscr{F}
	\end{align}
	が満たされる
	\begin{align}
		\Set{A \times B}{A \in \borel{[0,\infty)},\ B \in \mathscr{F}}
		\subset \Set{E \in \borel{[0,\infty)} \otimes \mathscr{F}}{\tau^{-1}(E) \in \mathscr{F}}
	\end{align}
	が従い$\tau$の$\mathscr{F}/\borel{[0,\infty)} \otimes \mathscr{F}$-可測性が出る．
	$X_T = X \circ \tau$より$X_T$は可測$\mathscr{F}/\borel{\R}$である．
	\QED
\end{prf}

\begin{itembox}[l]{Problem 1.17}
	Let $X$ be a measurable process and $T$ a random time. Show that 
	the collection of all sets of the form $\{X_T \in A\}$ and 
	$\{X_T \in A\} \cup \{T = \infty\};A \in \borel{\R}$, forms a 
	sub-$\sigma$-field of $\mathscr{F}$.
\end{itembox}

\begin{prf}
	$X_T$の定義域は$\{T<\infty\}$であるから，
	\begin{align}
		\mathscr{G} \coloneqq \Set{\{T < \infty\} \cap E}{E \in \mathscr{F}}
	\end{align}
	とおけば，前問の結果より$X_T$は可測$\mathscr{G}/\borel{\R}$である．
	$\mathscr{G} \subset \mathscr{F}$より
	\begin{align}
		\mathscr{H} \coloneqq \Set{\{X_T \in A\},\ \{X_T \in A\} \cup \{T = \infty\}}{A \in \borel{\R}}
	\end{align}
	に対して$\mathscr{H} \subset \mathscr{F}$が成立する．
	あとは$\mathscr{H}$が$\sigma$-加法族であることを示せばよい．
	実際，$A = \R$のとき
	\begin{align}
		\{X_T \in A\} \cup \{T = \infty\} = \{T < \infty\} \cup \{T = \infty\} = \Omega
	\end{align}
	となり$\Omega \in \mathscr{H}$が従い，また
	\begin{align}
		&\{X_T \in A\}^c = \{X_T \in A^c\} \cup \{T = \infty\}, \\
		&\left( \{X_T \in A\} \cup \{T = \infty\} \right)^c
		=  \{X_T \in A^c\} \cap \{T < \infty\}
		= \{X_T \in A^c\}
	\end{align}
	より$\mathscr{H}$は補演算で閉じる．更に$B_n \in \mathscr{H}\ (n=1,2,\cdots)$を取れば，
	\begin{align}
		\bigcup_{n=1}^{\infty} B_n = \left\{X_T \in \bigcup_{n=1}^{\infty} A_n \right\}
	\end{align}
	或は
	\begin{align}
		\bigcup_{n=1}^{\infty} B_n = \left\{X_T \in \bigcup_{n=1}^{\infty} A_n \right\} \cup \{T = \infty\}
	\end{align}
	が成立し$\bigcup_{n=1}^\infty B_n \in \mathscr{H}$を得る．
	\QED
\end{prf}